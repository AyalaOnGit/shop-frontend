<div class="profile-card surface-card p-5 shadow-3 border-round-xl max-w-3xl mx-auto">
    <h2 class="text-3xl font-bold mb-5 flex align-items-center gap-3 text-primary">
      <i class="pi pi-user text-4xl"></i>
      האזור האישי שלי
    </h2>
  
    <form [formGroup]="profileForm" (ngSubmit)="saveProfile()" class="grid align-items-start">
      
      <div class="field-group col-12 md:col-6 flex flex-column gap-2 mb-3">
        <label class="font-bold">שם פרטי</label>
        <p-iconfield iconPosition="left">
          <p-inputicon styleClass="pi pi-id-card"></p-inputicon>
          <input pInputText type="text" formControlName="firstName" placeholder="הכנס שם פרטי" class="w-full" [readonly]="!isEditing">
        </p-iconfield>
        <small *ngIf="profileForm.get('firstName')?.invalid && profileForm.get('firstName')?.touched" class="p-error">
          שם פרטי הוא שדה חובה
        </small>
      </div>
  
      <div class="field-group col-12 md:col-6 flex flex-column gap-2 mb-3">
        <label class="font-bold">שם משפחה</label>
        <input pInputText type="text" formControlName="lastName" class="w-full" [readonly]="!isEditing">
      </div>
  
      <div class="field-group col-12 md:col-6 flex flex-column gap-2 mb-3">
        <label class="font-bold">מספר טלפון</label>
        <p-iconfield iconPosition="left">
          <p-inputicon styleClass="pi pi-phone"></p-inputicon>
          <input pInputText type="text" formControlName="phone" class="w-full" [readonly]="!isEditing">
        </p-iconfield>
        <small *ngIf="profileForm.get('phone')?.errors?.['pattern']" class="p-error">
          מספר טלפון לא תקין
        </small>
      </div>
  
      <div class="field-group col-12 md:col-6 flex flex-column gap-2 mb-3">
        <label class="font-bold">עיר</label>
        <input pInputText type="text" formControlName="city" class="w-full" [readonly]="!isEditing">
      </div>
  
      <div class="field-group col-12 flex flex-column gap-2 mb-4">
        <label class="font-bold">כתובת למשלוח</label>
        <p-iconfield iconPosition="left">
          <p-inputicon styleClass="pi pi-map-marker"></p-inputicon>
          <input pInputText type="text" formControlName="address" class="w-full" [readonly]="!isEditing">
        </p-iconfield>
      </div>
  
      <div class="col-12 flex justify-content-end gap-3 mt-2">
        <p-button [label]="isEditing ? 'ביטול' : 'עריכת פרטים'" [icon]="isEditing ? 'pi pi-times' : 'pi pi-pencil'" 
                  severity="secondary" [outlined]="true" (click)="toggleEdit()"></p-button>
        <p-button *ngIf="isEditing" label="שמור שינויים" icon="pi pi-check" type="submit" 
                  [disabled]="profileForm.invalid" severity="primary"></p-button>
      </div>
    </form>
  
    <p-divider class="my-6"></p-divider>
  
    <div class="feedback-section bg-blue-50 p-4 border-round-xl">
      <h3 class="mt-0 flex align-items-center gap-2 text-900"><i class="pi pi-comments text-primary"></i> כתבו לנו משוב</h3>
      <div class="flex flex-column gap-3">
        <textarea pInputTextarea [(ngModel)]="feedbackText" rows="4" class="w-full shadow-1" placeholder="ההודעה שלך..."></textarea>
        <p-button label="שלח משוב" icon="pi pi-send" [disabled]="!feedbackText?.trim()" (click)="sendFeedback(feedbackText)"
                  styleClass="w-full md:w-auto align-self-end"></p-button>
      </div>
    </div>
  </div>